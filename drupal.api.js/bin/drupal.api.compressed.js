var JSON;JSON||(JSON={});
(function(){function a(a){return 10>a?"0"+a:a}function b(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=n[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,e){var d,m,k,n,p=f,j,g=e[a];g&&("object"===typeof g&&"function"===typeof g.toJSON)&&(g=g.toJSON(a));"function"===typeof l&&(g=l.call(e,a,g));switch(typeof g){case "string":return b(g);case "number":return isFinite(g)?String(g):"null";case "boolean":case "null":return String(g);case "object":if(!g)return"null";
f+=h;j=[];if("[object Array]"===Object.prototype.toString.apply(g)){n=g.length;for(d=0;d<n;d+=1)j[d]=c(d,g)||"null";k=0===j.length?"[]":f?"[\n"+f+j.join(",\n"+f)+"\n"+p+"]":"["+j.join(",")+"]";f=p;return k}if(l&&"object"===typeof l){n=l.length;for(d=0;d<n;d+=1)"string"===typeof l[d]&&(m=l[d],(k=c(m,g))&&j.push(b(m)+(f?": ":":")+k))}else for(m in g)Object.prototype.hasOwnProperty.call(g,m)&&(k=c(m,g))&&j.push(b(m)+(f?": ":":")+k);k=0===j.length?"{}":f?"{\n"+f+j.join(",\n"+f)+"\n"+p+"}":"{"+j.join(",")+
"}";f=p;return k}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,h,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,d){var e;h=f="";if("number"===typeof d)for(e=0;e<d;e+=1)h+=" ";else"string"===typeof d&&(h=d);if((l=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return c("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,d){var f,e,g=a[d];if(g&&"object"===typeof g)for(f in g)Object.prototype.hasOwnProperty.call(g,f)&&(e=c(g,f),void 0!==e?g[f]=e:delete g[f]);return b.call(a,d,g)}var d;a=String(a);e.lastIndex=0;e.test(a)&&(a=a.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),"function"===typeof b?c({"":d},""):d;throw new SyntaxError("JSON.parse");})})();var drupal=drupal||{};drupal.hasStorage="undefined"!==typeof Storage;drupal.hasStorage&="undefined"!==typeof JSON;drupal.retrieve=function(a){var b=null;if(a&&drupal.hasStorage&&(b=JSON.parse(localStorage.getItem(a)))&&(new Date).getTime()>b.expires)localStorage.removeItem(a),b={};return b};
drupal.store=function(a,b,c){a&&drupal.hasStorage&&(b.expires=1E3*(c||3600)+(new Date).getTime(),localStorage.setItem(a,JSON.stringify(b)))};drupal.clear=function(a){a&&drupal.hasStorage&&localStorage.removeItem(a)};
drupal.api=function(){return{resource:"",cacheId:"",isMobile:jQuery.hasOwnProperty("mobile"),endpoint:function(){return drupal.endpoint||""},getURL:function(a){if(a&&a.uri)return a.uri;var b=this.endpoint(),b=b+(this.resource?"/"+this.resource:"");return b+=a&&a.id?"/"+a.id:""},loading:function(a){this.isMobile&&(a?jQuery("body").addClass("ui-loading"):jQuery("body").removeClass("ui-loading"))},call:function(a,b,c,e,d){var f=this,h=this;a={url:a,dataType:b,type:c,success:function(a,b){f.loading(!1);
"success"==b?d&&d(a):console.log("Error: "+b)},error:function(a){h.loading(!1);console.log(a.statusText);d&&d(null)}};e&&(a.data=e);this.loading(!0);jQuery.ajax(a)},get:function(a,b,c,e,d){var f=typeof b;"object"===f?(e=c,c=b,b=""):"function"===f&&(e=b,b="");var h=this.getURL(a),h=h+(b?"/"+b:""),h=h+".jsonp",h=h+(c?"?"+decodeURIComponent(jQuery.param(c,!0)):"");if(d&&(this.cacheId=h.replace(/[^A-z0-9\-]/g,""),(a=drupal.retrieve(this.cacheId))&&a.url===h)){e(a.data);return}this.call(h,"jsonp","GET",
null,function(a){return function(b){d&&drupal.store(a.cacheId,{url:h,data:b});e(b)}}(this))},execute:function(a,b,c){a=this.getURL(b)+"/"+a;this.call(a,"json","POST",b,c)},save:function(a,b){var c=a.id?"PUT":"POST";this.call(this.getURL(a),"json",c,a,b)},remove:function(a,b){this.cacheId&&drupal.clear(this.cacheId);this.call(this.getURL(a),"json","DELETE",null,b)}}};drupal=drupal||{};
drupal.entity=function(a,b,c){this.options=jQuery.extend({store:!0,expires:3600},"undefined"===typeof c?{}:c);a&&(this.properties={},this.set(a));b&&this.load(b)};drupal.entity.index=function(a,b,c,e){e=jQuery.extend({store:!0},e||{});"function"===typeof b&&(c=b,b={});var d=new a({});d.api.get({},d.getQuery(b),function(b){if(b)for(var d=b.length;d--;)b[d]=new a(b[d],null,e);c&&c(b)},e.store)};
drupal.entity.prototype.setProperties=function(a,b){if(a)for(var c in a)this[c]=b[c]||this[c]||a[c],this.properties[c]=c};drupal.entity.prototype.update=function(a,b){a&&this.set(a);b&&b.call(this,this)};drupal.entity.prototype.set=function(a){this.api=this.api||null;this.setProperties({id:"",uri:""},a);this.entityName="entity"};drupal.entity.prototype.get=function(){var a={};if(this.properties)for(var b in this.properties)a[b]=this[b];return a};
drupal.entity.prototype.getPOST=function(){var a=this.get();a.id||delete a.id;return a};drupal.entity.prototype.getQuery=function(a){return a||{}};drupal.entity.prototype.load=function(a){this.id||a(null);this.api&&this.api.get(this.get(),{},function(b){return function(c){c||a(null);b.update(c,a)}}(this),this.options.store)};drupal.entity.prototype.save=function(a){this.api&&this.api.save(this.getPOST(),function(b){return function(c){b.update(c,a)}}(this))};
drupal.entity.prototype.remove=function(a){this.id&&this.api.remove(this.get(),a)};drupal=drupal||{};
drupal.cookie=function(a,b,c){if(1<arguments.length&&(!/Object/.test(Object.prototype.toString.call(b))||null===b||void 0===b)){c=$.extend({},c);if(null===b||void 0===b)c.expires=-1;if("number"===typeof c.expires){var e=c.expires,d=c.expires=new Date;d.setDate(d.getDate()+e)}b=String(b);return document.cookie=[encodeURIComponent(a),"=",c.raw?b:encodeURIComponent(b),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}c=
b||{};for(var e=c.raw?function(a){return a}:decodeURIComponent,d=document.cookie.split("; "),f=0,h;h=d[f]&&d[f].split("=");f++)if(e(h[0])===a)return e(h[1]||"");return null};drupal.system=function(a,b){drupal.entity.call(this,{},a,b)};drupal.system.prototype=new drupal.entity;drupal.system.prototype.constructor=drupal.system;drupal.system.api=jQuery.extend(new drupal.api,{resource:"system"});
drupal.system.prototype.set=function(a){drupal.entity.prototype.set.call(this,a);this.entityName="system";this.api=drupal.system.api;this.user=new drupal.user(a.user);this.user.setSession(a.session_name,a.sessid)};drupal.system.prototype.get=function(){return jQuery.extend(drupal.entity.prototype.get.call(this),{user:this.user.get()})};drupal.system.prototype.load=function(a){this.api.execute("connect",null,function(b){return function(c){b.update(c,a)}}(this))};
drupal.system.prototype.get_variable=function(a,b,c){this.api.execute("get_variable",{name:a,"default":b},c)};drupal.system.prototype.set_variable=function(a,b,c){this.api.execute("set_variable",{name:a,value:b},c)};drupal.system.prototype.del_variable=function(a,b){this.api.execute("del_variable",{name:a},b)};drupal=drupal||{};drupal.node=function(a,b,c){drupal.entity.call(this,a,b,c)};drupal.node.prototype=new drupal.entity;drupal.node.prototype.constructor=drupal.node;
drupal.node.api=jQuery.extend(new drupal.api,{resource:"node"});drupal.node.index=function(a,b,c){drupal.entity.index(drupal.node,a,b,c)};drupal.node.prototype.set=function(a){drupal.entity.prototype.set.call(this,a);this.entityName="node";this.api=drupal.node.api;this.id=a.nid||this.id||0;this.setProperties({nid:0,title:"",type:"",status:0,uid:0},a)};drupal.node.prototype.getQuery=function(a){a=drupal.entity.prototype.getQuery.call(this,a);a.type&&(a["parameters[type]"]=a.type,delete a.type);return a};
drupal=drupal||{};drupal.current_user=null;drupal.user=function(a,b,c){drupal.entity.call(this,a,b,c)};drupal.user.prototype=new drupal.entity;drupal.user.prototype.constructor=drupal.user;drupal.user.api=jQuery.extend(new drupal.api,{resource:"user"});drupal.user.index=function(a,b,c){drupal.entity.index(drupal.user,a,b,c)};
drupal.user.prototype.set=function(a){drupal.entity.prototype.set.call(this,a);this.entityName="user";this.api=drupal.user.api;this.id=a.uid||this.id||0;this.pass=a.pass||this.pass||"";this.setProperties({name:"",mail:"",status:1},a)};drupal.user.prototype.setSession=function(a,b){this.sessid=b;this.id&&a&&(this.session_name=a,drupal.cookie(a,b),drupal.current_user=this)};
drupal.user.prototype.login=function(a){this.api&&this.api.execute("login",{username:this.name,password:this.pass},function(b){return function(c){b.update(c.user);b.setSession(c.session_name,c.sessid);a&&a.call(b,b)}}(this))};drupal.user.prototype.register=function(a){this.api&&this.api.execute("register",this.getPOST(),function(b){return function(c){b.update(c,a)}}(this))};drupal.user.prototype.logout=function(a){this.api&&this.api.execute("logout",null,a)};
drupal.user.prototype.getPOST=function(){var a=drupal.entity.prototype.getPOST.call(this);a.pass=this.pass;return a};
