var NO_JQUERY={};
(function(d,k,h){if(!("console"in d)){var c=d.console={};c.log=c.warn=c.error=c.debug=function(){}}k===NO_JQUERY&&(k={fn:{},extend:function(){for(var a=arguments[0],f=1,e=arguments.length;f<e;f++){var b=arguments[f],g;for(g in b)a[g]=b[g]}return a}});k.fn.pm=function(){console.log("usage: \nto send:    $.pm(options)\nto receive: $.pm.bind(type, fn, [origin])");return this};k.pm=d.pm=function(a){b.send(a)};k.pm.bind=d.pm.bind=function(a,f,e,c,g){b.bind(a,f,e,c,!0===g)};k.pm.unbind=d.pm.unbind=function(a,
f){b.unbind(a,f)};k.pm.origin=d.pm.origin=null;k.pm.poll=d.pm.poll=200;var b={send:function(a){a=k.extend({},b.defaults,a);var f=a.target;if(a.target)if(a.type){var e={data:a.data,type:a.type};a.success&&(e.callback=b._callback(a.success));a.error&&(e.errback=b._callback(a.error));"postMessage"in f&&!a.hash?(b._bind(),f.postMessage(JSON.stringify(e),a.origin||"*")):(b.hash._bind(),b.hash.send(a,e))}else console.warn("postmessage type required");else console.warn("postmessage target window required")},
bind:function(a,f,e,c,g){b._replyBind(a,f,e,c,g)},_replyBind:function(a,f,e,c,g){"postMessage"in d&&!c?b._bind():b.hash._bind();c=b.data("listeners.postmessage");c||(c={},b.data("listeners.postmessage",c));var q=c[a];q||(q=[],c[a]=q);q.push({fn:f,callback:g,origin:e||k.pm.origin})},unbind:function(a,f){var e=b.data("listeners.postmessage");if(e)if(a)if(f){var c=e[a];if(c){for(var g=[],d=0,n=c.length;d<n;d++){var l=c[d];l.fn!==f&&g.push(l)}e[a]=g}}else delete e[a];else for(d in e)delete e[d]},data:function(a,
f){return f===h?b._data[a]:b._data[a]=f},_data:{},_CHARS:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),_random:function(){for(var a=[],f=0;32>f;f++)a[f]=b._CHARS[0|32*Math.random()];return a.join("")},_callback:function(a){var f=b.data("callbacks.postmessage");f||(f={},b.data("callbacks.postmessage",f));var e=b._random();f[e]=a;return e},_bind:function(){b.data("listening.postmessage")||(d.addEventListener?d.addEventListener("message",b._dispatch,!1):d.attachEvent&&d.attachEvent("onmessage",
b._dispatch),b.data("listening.postmessage",1))},_dispatch:function(a){try{var f=JSON.parse(a.data)}catch(e){console.warn("postmessage data invalid json: ",e);return}if(f.type){var c=(b.data("callbacks.postmessage")||{})[f.type];if(c)c(f.data);else for(var c=(b.data("listeners.postmessage")||{})[f.type]||[],g=0,d=c.length;g<d;g++){var n=c[g];if(n.origin&&"*"!==n.origin&&a.origin!==n.origin)console.warn("postmessage message origin mismatch",a.origin,n.origin),f.errback&&b.send({target:a.source,data:{message:"postmessage origin mismatch",
origin:[a.origin,n.origin]},type:f.errback});else{var l=function(r){f.callback&&b.send({target:a.source,data:r,type:f.callback})};try{n.callback?n.fn(f.data,l,a):l(n.fn(f.data,a))}catch(m){if(f.errback)b.send({target:a.source,data:m,type:f.errback});else throw m;}}}}else console.warn("postmessage message type required")},hash:{send:function(a,c){var e=a.target,h=a.url;if(h){var h=b.hash._url(h),g,q=b.hash._url(d.location.href);if(d==e.parent)g="parent";else try{for(var n=0,l=parent.frames.length;n<
l;n++)if(parent.frames[n]==d){g=n;break}}catch(m){g=d.name}null==g?console.warn("postmessage windows must be direct parent/child windows and the child must be available through the parent window.frames list"):(g={"x-requested-with":"postmessage",source:{name:g,url:q},postmessage:c},q="#x-postmessage-id="+b._random(),e.location=h+q+encodeURIComponent(JSON.stringify(g)))}else console.warn("postmessage target window url is required")},_regex:/^\#x\-postmessage\-id\=(\w{32})/,_regex_len:50,_bind:function(){b.data("polling.postmessage")||
(setInterval(function(){var a=""+d.location.hash,c=b.hash._regex.exec(a);c&&(c=c[1],b.hash._last!==c&&(b.hash._last=c,b.hash._dispatch(a.substring(b.hash._regex_len))))},k.pm.poll||200),b.data("polling.postmessage",1))},_dispatch:function(a){if(a){try{if(a=JSON.parse(decodeURIComponent(a)),!("postmessage"===a["x-requested-with"]&&a.source&&null!=a.source.name&&a.source.url&&a.postmessage))return}catch(c){return}var e=a.postmessage,h=(b.data("callbacks.postmessage")||{})[e.type];if(h)h(e.data);else{var g;
g="parent"===a.source.name?d.parent:d.frames[a.source.name];for(var h=(b.data("listeners.postmessage")||{})[e.type]||[],q=0,n=h.length;q<n;q++){var l=h[q];if(l.origin){var m=/https?\:\/\/[^\/]*/.exec(a.source.url)[0];if("*"!==l.origin&&m!==l.origin){console.warn("postmessage message origin mismatch",m,l.origin);e.errback&&b.send({target:g,data:{message:"postmessage origin mismatch",origin:[m,l.origin]},type:e.errback,hash:!0,url:a.source.url});continue}}m=function(r){e.callback&&b.send({target:g,
data:r,type:e.callback,hash:!0,url:a.source.url})};try{l.callback?l.fn(e.data,m):m(l.fn(e.data))}catch(r){if(e.errback)b.send({target:g,data:r,type:e.errback,hash:!0,url:a.source.url});else throw r;}}}}},_url:function(a){return(""+a).replace(/#.*$/,"")}}};k.extend(b,{defaults:{target:null,url:null,type:null,data:null,success:null,error:null,origin:"*",hash:!1}})})(this,"undefined"===typeof jQuery?NO_JQUERY:jQuery);"JSON"in window&&window.JSON||(JSON={});
(function(){function d(a){return 10>a?"0"+a:a}function k(a){b.lastIndex=0;return b.test(a)?'"'+a.replace(b,function(a){var c=e[a];return"string"===typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function h(c,e){var b,d,m,r,u=a,s,p=e[c];p&&"object"===typeof p&&"function"===typeof p.toJSON&&(p=p.toJSON(c));"function"===typeof t&&(p=t.call(e,c,p));switch(typeof p){case "string":return k(p);case "number":return isFinite(p)?String(p):"null";case "boolean":case "null":return String(p);
case "object":if(!p)return"null";a+=f;s=[];if("[object Array]"===Object.prototype.toString.apply(p)){r=p.length;for(b=0;b<r;b+=1)s[b]=h(b,p)||"null";m=0===s.length?"[]":a?"[\n"+a+s.join(",\n"+a)+"\n"+u+"]":"["+s.join(",")+"]";a=u;return m}if(t&&"object"===typeof t)for(r=t.length,b=0;b<r;b+=1)d=t[b],"string"===typeof d&&(m=h(d,p))&&s.push(k(d)+(a?": ":":")+m);else for(d in p)Object.hasOwnProperty.call(p,d)&&(m=h(d,p))&&s.push(k(d)+(a?": ":":")+m);m=0===s.length?"{}":a?"{\n"+a+s.join(",\n"+a)+"\n"+
u+"}":"{"+s.join(",")+"}";a=u;return m}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(a){return this.getUTCFullYear()+"-"+d(this.getUTCMonth()+1)+"-"+d(this.getUTCDate())+"T"+d(this.getUTCHours())+":"+d(this.getUTCMinutes())+":"+d(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
b=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a,f,e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;"function"!==typeof JSON.stringify&&(JSON.stringify=function(c,b,e){var d;f=a="";if("number"===typeof e)for(d=0;d<e;d+=1)f+=" ";else"string"===typeof e&&(f=e);if((t=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return h("",{"":c})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function e(a,r){var c,d,f=a[r];if(f&&"object"===typeof f)for(c in f)Object.hasOwnProperty.call(f,c)&&(d=e(f,c),void 0!==d?f[c]=d:delete f[c]);return b.call(a,r,f)}var d;c.lastIndex=0;c.test(a)&&(a=a.replace(c,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return d=eval("("+a+")"),"function"===typeof b?e({"":d},""):d;throw new SyntaxError("JSON.parse");})})();var allplayers=allplayers||{};allplayers.app=function(d,k){if(k){d=d||{};for(var h in k)d.hasOwnProperty(h)||(d[h]=k[h]);this.options=d;this.init()}};allplayers.app.getParam=function(d){d=d.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");d=RegExp("[\\?&]"+d+"=([^&#]*)").exec(window.location.search);return null==d?"":decodeURIComponent(d[1].replace(/\+/g," "))};
allplayers.app.prototype.init=function(){document.proxy=this};allplayers=allplayers||{app:{}};
(function(d,k,h,c,b){c&&!c.fn.allplayers_server&&(c.fn.allplayers_server=function(a){return c(this).each(function(){new h.app.server(a,c(this))})});h.app.server=function(a,c){this.context=c;h.app.call(this,a,{spinner:"",loading:"Loading",base:"https://platform.allplayers.com",type:"registration",group:"api",query:{},reg:{},checkout:{},src:"",style:"",complete:function(){}})};h.app.server.prototype=new h.app;h.app.server.prototype.constructor=h.app.server;h.app.server.prototype.init=function(){h.app.prototype.init.call(this);
this.baseURL="https://platform.allplayers.com";this.options.base&&(this.baseURL=this.options.base);this.isLoading=!0;this.options.spinner||(this.options.spinner=this.options.base,this.options.spinner+="/sites/all/themes/basic_foundation",this.options.spinner+="/images/loader.gif");this.pluginReady=!1;var a=c(k.createElement("div")).css({background:"url("+this.options.spinner+") no-repeat 10px 13px",padding:"10px 10px 10px 60px",width:"100%"});a.append(this.options.loading);var b=this.context.attr("id")+
"_iframe",e="";if(e=h.app.getParam("apq"))e=this.options.base+"/"+e;else if(this.options.src)e=this.options.src;else{e=this.options.base+"/g/"+this.options.group;switch(this.options.type){case "registration":e+="/register";break;case "forms":e+="/forms"}this.options.query.etyp=this.options.type}e+=-1===e.search(/\?/)?"?":"&";if(!function(a){for(var c in a)return!1;return!0}(this.options.query))for(var d in this.options.query)e+=d+"="+encodeURIComponent(this.options.query[d]),e+="&";var e=e+("#"+b),
g=this,q=c(k.createElement("iframe")).attr({id:b,name:b,scrolling:"no",seamless:"seamless",width:"100%",height:"0px",src:e}).css({border:"none",overflowY:"hidden"});this.context.append(a);this.context.append(q);this.serverTarget=null;c.pm.bind("chromePluginReady",function(){g.pluginReady=!0});c.pm.bind("chromeMsgResp",function(a){c.pm({target:g.serverTarget,url:g.baseURL,type:"chromeMsgResp",data:a})});c.pm.bind("chromeMsg",function(a){c.pm({target:g.serverTarget,url:g.baseURL,type:"chromeMsg",data:a})});
c.pm.bind("init",function(c,b){g.serverTarget=b.source;g.isLoading=!1;a.remove();q.height(c.height).attr("height",c.height+"px");return c});var n=function(a){return a.product_uuid&&a.price&&a.quantity&&a.title},l=function(a){return c('input[product="'+a+'"]')};c.pm.bind("addProduct",function(a){(new h.product({uuid:a.product_uuid})).getProduct(a.product_uuid,function(b){if(b.uuid==a.product_uuid){var d=a.product_uuid,e=l(d).val();if(e)e=JSON.parse(e),e.quantity=parseInt(e.quantity),e.quantity+=parseInt(a.quantity),
l(d).val(JSON.stringify(e)),c("#add-product-display-"+d+" td:last").text(e.quantity);else if(n(a)){if("undefined"==a.price||"product"==b.type&&0<b.price_raw)a.price=b.price_raw/100;a.price=accounting.formatMoney(a.price);a.title=b.title;c("<input>").attr({type:"hidden",product:d,name:"add-product[]",value:JSON.stringify(a)}).appendTo("form#og-registration-register-app");c("#edit-next").val("Continue");0==c("#add-products-table").length&&(c("<table>").attr({id:"add-products-table","class":"sticky-table"}).appendTo("#add-products"),
c("#add-products-table").append("<thead><tr><th>Added Products</th><th>Price</th><th>Quantity</th></tr></thead><tbody></tbody>"));c("#add-products-table tbody").append('<tr id="add-product-display-'+d+'"><td>'+a.title+"</td><td>"+a.price+"</td><td>"+a.quantity+"</td></tr>")}}else alert("There was an error adding the product.")})});c.pm.bind("addCheckoutProduct",function(a){a&&a.product_uuid?(new h.product({uuid:a.product_uuid})).getProduct(a.product_uuid,function(b){if(b&&b.uuid==a.product_uuid){var e=
a.product_uuid,d=l(e).val();if(d)d=JSON.parse(d),d.quantity=parseInt(d.quantity),d.quantity+=parseInt(a.quantity),l(e).val(JSON.stringify(d)),c("#adhoc-product-"+e+" td.quantity").text(d.quantity);else if(n(a)){if("undefined"==a.price||"product"==b.type&&0<b.price_raw)a.price=b.price_raw/100,a.price_raw=b.price_raw;a.price=accounting.formatMoney(a.price);a.title=b.title;c("<input>").attr({type:"hidden",product:e,name:"add-product[]",value:JSON.stringify(a)}).appendTo("form#commerce-checkout-form-review");
m(a)}}else alert("There was an error adding the product.")}):(new h.product({uuid:""})).createProduct(a,function(c){c?(a.price_raw=c.price_raw,a.price=c.price_raw/100,a.price=accounting.formatMoney(a.price),a.product_uuid=c.uuid,m(a),(new h.product({uuid:a.product_uuid})).addProductToCart(a,function(a){})):alert("There was an error creating the product.")})});c.pm.bind("removeProduct",function(a){a=a.product_uuid;l(a).val()&&(l(a).remove(),c("#add-product-display-"+a).remove())});c.pm.bind("clientReady",
function(a,b){g.serverTarget=b.source;g.pluginReady&&c.pm({target:b.source,url:g.baseURL,type:"chromePluginReady"});"registration"==g.options.type?c.pm({target:b.source,url:g.baseURL,type:"getRegistration",data:g.options.reg}):"checkout"==g.options.type&&c.pm({target:b.source,url:g.baseURL,type:"getCheckout",data:g.options.checkout})});h.app.server.prototype.init.processCheckout=function(a,b){c.pm({target:g.serverTarget,url:g.baseURL,type:"processCheckout",data:a})};var m=function(a){a.total=1==a.quantity?
a.price:accounting.formatMoney(a.price_raw*a.quantity/100);c(".views-table tbody").append('<tr id="adhoc-product-'+a.product_uuid+'"><td class="title">'+a.title+'</td><td class="seller">Seller</td><td class="price">'+a.price+'</td><td class="quantity">'+a.quantity+'</td><td class="total">'+a.total+"</td></tr>");var b=c("td.component-total").text(),b=accounting.unformat(b)+a.price_raw/100,b=accounting.formatMoney(b);c("td.component-total").text(b)}}})(window,document,window.allplayers,jQuery);
